{"ast":null,"code":"var _jsxFileName = \"/Users/slavaP/Desktop/labs/Final_Project/goplay_frontend/src/LogIn.js\";\nimport React from \"react\";\nimport { Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { setUser, setMyTeams, setMyGroups } from './redux/actions/user_actions';\n\nclass LogIn extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: \"\",\n      password: \"\"\n    };\n\n    this.handleChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      fetch(\"http://localhost:3000/api/v1/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Accept\": \"application/json\"\n        },\n        body: JSON.stringify(this.state)\n      }).then(res => res.json()).then(response => {\n        if (response.errors) {\n          alert(response.errors);\n        } else {\n          this.props.setUser(response);\n          localStorage.token = response.token;\n          this.setState({\n            username: \"\",\n            password: \"\"\n          });\n          fetch(\"http://localhost:3000/api/v1/my_teams\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n              \"Accept\": \"application/json\"\n            },\n            body: JSON.stringify({\n              user_id: response.user.data.attributes.id\n            })\n          }).then(res => res.json()).then(teams => {\n            this.props.setMyTeams(teams.data);\n            console.log(teams);\n          });\n        }\n      });\n    };\n  }\n\n  render() {\n    if (this.props.currentUser !== null) {\n      console.log(this.props.myTeams);\n      return React.createElement(Redirect, {\n        to: \"/dashboard\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      className: \"login-main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"login_logo\",\n      src: \"./images/nav_logo.png\",\n      alt: \"logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }), React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      className: \"form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"field required\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"label\",\n      htmlFor: \"username\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"Username\"), React.createElement(\"input\", {\n      className: \"text-input\",\n      id: \"username\",\n      name: \"username\",\n      value: this.state.username,\n      onChange: this.handleChange,\n      required: true,\n      type: \"username\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      className: \"field required\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"label\",\n      htmlFor: \"password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \"Password\"), React.createElement(\"input\", {\n      className: \"text-input\",\n      id: \"password\",\n      name: \"password\",\n      value: this.state.password,\n      onChange: this.handleChange,\n      required: true,\n      type: \"password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      className: \"field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      className: \"field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"button\",\n      type: \"submit\",\n      value: \"Log In\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nfunction msp(state) {\n  return {\n    currentUser: state.userReducer.currentUser,\n    myTeams: state.userReducer.myTeams\n  };\n}\n\nexport default connect(msp, {\n  setUser,\n  setMyTeams,\n  setMyGroups\n})(LogIn);","map":{"version":3,"sources":["/Users/slavaP/Desktop/labs/Final_Project/goplay_frontend/src/LogIn.js"],"names":["React","Redirect","connect","setUser","setMyTeams","setMyGroups","LogIn","Component","state","username","password","handleChange","event","setState","target","name","value","handleSubmit","e","preventDefault","fetch","method","headers","body","JSON","stringify","then","res","json","response","errors","alert","props","localStorage","token","user_id","user","data","attributes","id","teams","console","log","render","currentUser","myTeams","msp","userReducer"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,OAAT,EAAkBC,UAAlB,EAA8BC,WAA9B,QAAiD,8BAAjD;;AAEA,MAAMC,KAAN,SAAoBN,KAAK,CAACO,SAA1B,CAAmC;AAAA;AAAA;AAAA,SACjCC,KADiC,GACzB;AACJC,MAAAA,QAAQ,EAAE,EADN;AAEJC,MAAAA,QAAQ,EAAE;AAFN,KADyB;;AAAA,SAMjCC,YANiC,GAMjBC,KAAD,IAAW;AACtB,WAAKC,QAAL,CAAc;AACZ,SAACD,KAAK,CAACE,MAAN,CAAaC,IAAd,GAAqBH,KAAK,CAACE,MAAN,CAAaE;AADtB,OAAd;AAGH,KAVgC;;AAAA,SAYjCC,YAZiC,GAYjBC,CAAD,IAAO;AAClBA,MAAAA,CAAC,CAACC,cAAF;AACAC,MAAAA,KAAK,CAAC,oCAAD,EAAuC;AAC1CC,QAAAA,MAAM,EAAE,MADkC;AAE1CC,QAAAA,OAAO,EAAE;AACP,0BAAgB,kBADT;AAEP,oBAAU;AAFH,SAFiC;AAM1CC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe,KAAKjB,KAApB;AANoC,OAAvC,CAAL,CAQCkB,IARD,CAQMC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EARb,EASCF,IATD,CASMG,QAAQ,IAAI;AAChB,YAAIA,QAAQ,CAACC,MAAb,EAAoB;AAClBC,UAAAA,KAAK,CAACF,QAAQ,CAACC,MAAV,CAAL;AACD,SAFD,MAEO;AACL,eAAKE,KAAL,CAAW7B,OAAX,CAAmB0B,QAAnB;AACAI,UAAAA,YAAY,CAACC,KAAb,GAAqBL,QAAQ,CAACK,KAA9B;AACA,eAAKrB,QAAL,CAAc;AACZJ,YAAAA,QAAQ,EAAE,EADE;AAEZC,YAAAA,QAAQ,EAAE;AAFE,WAAd;AAIAU,UAAAA,KAAK,CAAC,uCAAD,EAA0C;AAC3CC,YAAAA,MAAM,EAAE,MADmC;AAE3CC,YAAAA,OAAO,EAAE;AACL,8BAAgB,kBADX;AAEL,wBAAU;AAFL,aAFkC;AAM3CC,YAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBU,cAAAA,OAAO,EAAEN,QAAQ,CAACO,IAAT,CAAcC,IAAd,CAAmBC,UAAnB,CAA8BC;AADtB,aAAf;AANqC,WAA1C,CAAL,CAUCb,IAVD,CAUMC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAVb,EAWCF,IAXD,CAWMc,KAAK,IAAI;AAAC,iBAAKR,KAAL,CAAW5B,UAAX,CAAsBoC,KAAK,CAACH,IAA5B;AAChBI,YAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACC,WAbD;AAcD;AACF,OAlCD;AAmCD,KAjD8B;AAAA;;AAmD/BG,EAAAA,MAAM,GAAE;AACJ,QAAI,KAAKX,KAAL,CAAWY,WAAX,KAA2B,IAA/B,EAAqC;AACnCH,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKV,KAAL,CAAWa,OAAvB;AACE,aAAO,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACH;;AACD,WACA;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,YAAf;AAA4B,MAAA,GAAG,EAAC,uBAAhC;AAAwD,MAAA,GAAG,EAAC,MAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE;AAAM,MAAA,QAAQ,EAAE,KAAK5B,YAArB;AAAmC,MAAA,SAAS,EAAC,MAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAG,MAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAO,MAAA,SAAS,EAAC,OAAjB;AAAyB,MAAA,OAAO,EAAC,UAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,EAEI;AAAO,MAAA,SAAS,EAAC,YAAjB;AAA8B,MAAA,EAAE,EAAC,UAAjC;AAA4C,MAAA,IAAI,EAAC,UAAjD;AAA4D,MAAA,KAAK,EAAE,KAAKT,KAAL,CAAWC,QAA9E;AAAwF,MAAA,QAAQ,EAAE,KAAKE,YAAvG;AAAqH,MAAA,QAAQ,MAA7H;AAA8H,MAAA,IAAI,EAAC,UAAnI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CADA,EAKA;AAAG,MAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAO,MAAA,SAAS,EAAC,OAAjB;AAAyB,MAAA,OAAO,EAAC,UAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,EAEI;AAAO,MAAA,SAAS,EAAC,YAAjB;AAA8B,MAAA,EAAE,EAAC,UAAjC;AAA4C,MAAA,IAAI,EAAC,UAAjD;AAA4D,MAAA,KAAK,EAAE,KAAKH,KAAL,CAAWE,QAA9E;AAAwF,MAAA,QAAQ,EAAE,KAAKC,YAAvG;AAAqH,MAAA,QAAQ,MAA7H;AAA8H,MAAA,IAAI,EAAC,UAAnI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CALA,EASA;AAAG,MAAA,SAAS,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATA,EAWA;AAAG,MAAA,SAAS,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAO,MAAA,SAAS,EAAC,QAAjB;AAA0B,MAAA,IAAI,EAAC,QAA/B;AAAwC,MAAA,KAAK,EAAC,QAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAXA,CAFF,CADA;AAoBH;;AA5E8B;;AA+EnC,SAASmC,GAAT,CAAatC,KAAb,EAAmB;AACjB,SAAO;AACLoC,IAAAA,WAAW,EAAEpC,KAAK,CAACuC,WAAN,CAAkBH,WAD1B;AAELC,IAAAA,OAAO,EAAErC,KAAK,CAACuC,WAAN,CAAkBF;AAFtB,GAAP;AAID;;AAED,eAAe3C,OAAO,CAAC4C,GAAD,EAAM;AAAE3C,EAAAA,OAAF;AAAWC,EAAAA,UAAX;AAAuBC,EAAAA;AAAvB,CAAN,CAAP,CAAkDC,KAAlD,CAAf","sourcesContent":["import React from \"react\";\nimport { Redirect } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport { setUser, setMyTeams, setMyGroups } from './redux/actions/user_actions'\n\nclass LogIn extends React.Component{\n  state = {\n      username: \"\",\n      password: \"\"\n  }\n\n  handleChange = (event) => {\n      this.setState({\n        [event.target.name]: event.target.value\n      })\n  }\n\n  handleSubmit = (e) => {\n      e.preventDefault()\n      fetch(\"http://localhost:3000/api/v1/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Accept\": \"application/json\"\n        },\n        body: JSON.stringify(this.state)\n      })\n      .then(res => res.json())\n      .then(response => {\n        if (response.errors){\n          alert(response.errors)\n        } else {\n          this.props.setUser(response)\n          localStorage.token = response.token\n          this.setState({\n            username: \"\",\n            password: \"\"\n          })\n          fetch(\"http://localhost:3000/api/v1/my_teams\", {\n              method: \"POST\",\n              headers: {\n                  \"Content-Type\": \"application/json\",\n                  \"Accept\": \"application/json\"\n              },\n              body: JSON.stringify({\n                  user_id: response.user.data.attributes.id\n              })\n          })\n          .then(res => res.json())\n          .then(teams => {this.props.setMyTeams(teams.data)\n          console.log(teams)\n          })\n        }\n      })\n    }\n\n    render(){\n        if (this.props.currentUser !== null) {\n          console.log(this.props.myTeams)\n            return <Redirect to='/dashboard' />;\n        } \n        return (\n        <div className=\"login-main\">\n          <img className=\"login_logo\" src=\"./images/nav_logo.png\" alt=\"logo\"/>\n          <form onSubmit={this.handleSubmit} className='form'>\n          <p className='field required'>\n              <label className='label' htmlFor='username'>Username</label>\n              <input className='text-input' id='username' name='username' value={this.state.username} onChange={this.handleChange} required type='username' />\n          </p>\n          <p className='field required'>\n              <label className='label' htmlFor='password'>Password</label>\n              <input className='text-input' id='password' name='password' value={this.state.password} onChange={this.handleChange} required type='password'/>\n          </p>\n          <p className='field'>\n          </p>\n          <p className='field'>\n              <input className='button' type='submit' value='Log In' />\n          </p>\n          </form>\n        </div>\n        );\n    }\n}\n\nfunction msp(state){\n  return {\n    currentUser: state.userReducer.currentUser,\n    myTeams: state.userReducer.myTeams\n  }\n}\n\nexport default connect(msp, { setUser, setMyTeams, setMyGroups})(LogIn)\n"]},"metadata":{},"sourceType":"module"}